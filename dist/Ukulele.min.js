define(function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(){function e(e){function t(e){var t=g[e];if(!t)return void(m.parentUku&&m.parentUku.refresh(e));for(var r=t.controllerInstance,u=b[e],o=0;o<t.boundItems.length;o++){var l=t.boundItems[o],c=l.attributeName;if(u){"selected"===l.ukuTag&&(c=c.split("|")[0]);var s=i.UkuleleUtil.getFinalValue(m,r,c),f=i.UkuleleUtil.getFinalValue(m,u,c);if(!a.ObjectUtil.compare(f,s)){c=l.attributeName;for(var d=t.getBoundItemsByName(c),v=0;v<d.length;v++){var h=d[v];h.render(r)}m.refreshHandler&&m.refreshHandler.call(m)}}}n(r,e)}if(e){if("string"==typeof e)t(e);else if(a.ObjectUtil.isArray(e))for(var r=0;r<e.length;r++)t(e[r])}else for(var u in g)t(u)}function t(){for(var e in g){var t=g[e],r=t.controllerInstance;n(r,e)}}function n(e,t){var n=a.ObjectUtil.deepClone(e);delete b[t],b[t]=n}function r(r){function a(e,t){function n(e){function i(e,t){var n=e.getAttribute("uku-onload");n&&(t?h(n,[t]):h(n,[e]))}function u(e,t){var n=t.split("|");if(n&&2===n.length){var r=n[0],i=n[1];return e=e.replace(new RegExp(r,"gm"),i)}return e}var o=r[e],l=o.getAttribute("load");"false"===l?(e++,e<r.length?n(e):t()):!function(){var l=o.getAttribute("src"),c=o.getAttribute("replace"),s=o.getAttribute("replace-controller"),f=new Ajax;c&&"true"===c?!function(o){f.get(l,function(l){s&&(l=u(l,s)),o.insertAdjacentHTML("beforeBegin",l);var c=o.previousElementSibling;o.parentNode.removeChild(o),U.push({func:i,args:[o,c]}),a(c,function(){e++,e<r.length?n(e):t()})})}(o):!function(o){f.get(l,function(l){s&&(l=u(l,s)),o.insertAdjacentHTML("afterBegin",l),o.classList.remove("uku-include"),U.push({func:i,args:[o]}),a(o,function(){e++,e<r.length?n(e):t()})})}(o)}()}var r=e.querySelectorAll(".uku-include"),i=0;i<r.length?n(i):t()}function l(e){-1!==i.UkuleleUtil.searchUkuExpTag(u.Selector.directText(e))&&(i.UkuleleUtil.isRepeat(e)||i.UkuleleUtil.isInRepeat(e)||p(e));for(var t=0;t<e.children.length;t++)l(e.children[t])}function p(e){var t=u.Selector.directText(e);if(-1!==i.UkuleleUtil.searchUkuExpTag(t)){var n=t.slice(2,-2),r=v(n);if(r){var a=new s.BoundItemExpression(n,t,e,m);r.addBoundItem(a),a.render(r.controllerInstance)}}}function g(t,n){var r=t.getAttribute("uku-"+n),i=(t.tagName,v(r));if(i){var a=new c.BoundItemAttribute(r,n,t,m);i.addBoundItem(a),a.render(i.controllerInstance),(0,o.elementChangedBinder)(t,n,i,e)}}function b(e){var t=e.getAttribute("uku-text");if(t){var n=v(t);if(n){var r=new f.BoundItemInnerText(t,e,m);n.addBoundItem(r),r.render(n.controllerInstance)}}}function y(t,r){var i=t.getAttribute("uku-"+r),a=r.substring(2),u=v(i);u&&!function(){var r=u.controllerInstance,o=i.split("."),l=void 0;l="parent"===o[0]?o[1]:o[0],t.addEventListener(a,function(t){n(r,l),h(i,arguments),e(l)})}()}function k(e){var t=e.getAttribute("uku-repeat"),n=t.split(" in "),r=n[0],i=n[1],a=v(i);if(a){var u=a.controllerInstance,o=new d.BoundItemRepeat(i,r,e,m);a.addBoundItem(o),o.render(u)}}var U=[];a(r,function(){function e(e){for(var t=[],n=0;n<e.attributes.length;n++){var r=e.attributes[n];-1!==r.nodeName.search("uku-on")?t.push(r):t.unshift(r)}return t}var n=[],a=u.Selector.fuzzyFind(r,"uku-");a&&n.push(a);for(var o=r.querySelectorAll("*"),c=0;c<o.length;c++){var s=o[c],f=u.Selector.fuzzyFind(s,"uku-");f&&!i.UkuleleUtil.isInRepeat(f)&&n.push(f)}l(r);for(var d=0;d<n.length;d++)for(var v=n[d],h=e(v),p=0;p<h.length;p++){var A=h[p];if(i.UkuleleUtil.searchUkuAttrTag(A.nodeName)>-1){var I=A.nodeName.split("-");I.shift();var T=I.join("-");"application"!==T&&(0===T.search("on")?i.UkuleleUtil.isRepeat(v)||i.UkuleleUtil.isInRepeat(v)||y(v,T):-1!==T.search("repeat")?k(v):i.UkuleleUtil.isRepeat(v)||i.UkuleleUtil.isInRepeat(v)||("text"!==T?g(v,T):b(v)))}}for(;U.length>0;){var N=U.pop();N.func.apply(this,N.args)}m.refreshHandler&&m.refreshHandler.call(m),m.initHandler&&m.initHandler.call(m,r),t()})}function v(e){var t=i.UkuleleUtil.getBoundModelInstantName(e),n=g[t];if(!n){var r=e.split("."),a=r[0];if("parent"===a&&m.parentUku)return r.shift(),e=r.join("."),m.parentUku.getControllerModelByName(e)}return n}function h(e,t){var n=v(e),r=n.controllerInstance,a=i.UkuleleUtil.getFinalValue(m,r,e,t);return a}function p(){var e=document.querySelectorAll("[uku-application]");if(1!==e.length)throw new Error("Only one 'uku-application' can be declared in a whole html.");r(e[0])}var g={},b={},m=this;this.refreshHandler=null,this.initHandler=null,this.parentUku=null,this.init=function(){p()},this.registerController=function(e,t){var n=new l.ControllerModel(e,t);g[e]=n},this.dealWithElement=function(e){r(e)},this.loadIncludeElement=function(e){"false"===e.getAttribute("load")&&(e.setAttribute("load",!0),r(e.parentNode))},this.getControllerModelByName=function(e){return v(e)},this.refresh=function(t){e(t)},this.getFinalValueByExpression=function(e){var t=this.getControllerModelByName(e).controllerInstance;return i.UkuleleUtil.getFinalValue(this,t,e)},this.watch=function(t,n){var r=v(t);if(r){var i=new c.BoundItemAttribute(attr,tagName,element,m);r.addBoundItem(i),i.render(r.controllerInstance),(0,o.elementChangedBinder)(element,tagName,r,e)}},this.unwatch=function(e,t){}}Object.defineProperty(t,"__esModule",{value:!0}),t.Ukulele=r;var i=n(1),a=n(3),u=n(2),o=n(4),l=n(5),c=n(6),s=n(8),f=n(9),d=n(10)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.UkuleleUtil=void 0;var a=n(2);t.UkuleleUtil=function(){function e(){r(this,e)}return i(e,null,[{key:"getFinalAttribute",value:function(t){var n=t.split("."),r=n.shift();return"parent"===r?e.getFinalAttribute(n.join(".")):n.join(".")}},{key:"searchHtmlTag",value:function(e,t){var n="^<"+t+"\\s[\\s\\S]*</"+t+">$",r=new RegExp(n),i=e.search(r);return i}},{key:"isStringArgument",value:function(e,t){var n=/^"[\s\S]*"$/,r=e.search(n),i=/^'[\s\S]*'$/;if(0===r)return!0;var a=e.search(i);return 0===a?!0:!1}},{key:"searchUkuAttrTag",value:function(e){var t=/^uku\-.*/,n=e.search(t);return n}},{key:"searchUkuExpTag",value:function(e){var t=/^\{\{.*\}\}$/,n=e.search(t);return n}},{key:"searchUkuFuncArg",value:function(e){var t=/\(.*\)$/,n=e.search(t);return n}},{key:"isRepeat",value:function(e){return e.getAttribute("uku-repeat")?!0:!1}},{key:"isInRepeat",value:function(e){for(var t=a.Selector.parents(e),n=0;n<t.length;n++){var r=t[n],i=r.getAttribute("uku-repeat");if(i)return!0}return!1}},{key:"getBoundModelInstantName",value:function(e){var t=e.split(".")[0];return t?t:null}},{key:"getAttributeFinalValue",value:function(t,n){var r=e.getAttributeFinalValueAndParent(t,n),i=r.value;return i}},{key:"getAttributeFinalValueAndParent",value:function(t,n){var r=t,i=void 0;n=e.getFinalAttribute(n);var a=n.split(".");if(""!==n&&r)for(var u=0;u<a.length;u++){var o=a[u];if(i=r,r=r[o],void 0===r||null===r)break}return{value:r,parent:i}}},{key:"getFinalValue",value:function(t,n,r,i){var a=e.searchUkuFuncArg(r);if(-1===a)return e.getAttributeFinalValue(n,r);var u=r.substring(0,a),o=e.getAttributeFinalValueAndParent(n,u),l=o.value;if(void 0===l)return l;var c=[],s=r.substring(a+1,r.length-1);if(""!==s){var f=e.isStringArgument(s);s=f?[s]:s.split(",");for(var d=0;d<s.length;d++){var v=void 0,h=s[d],p=t.getControllerModelByName(h);if(p&&p.controllerInstance){var g=p.controllerInstance;v=1===h.split(".").length?g:e.getFinalValue(t,g,h)}else v=e.getFinalValue(t,n,h);if(v!==n)c.push(v);else{var b=/\'.*\'/,m=h.search(b),y=/\".*\"/,k=h.search(y);-1!==m?(h=h.substring(1,h.length-1),c.push(h)):-1!==k?(h=h.substring(1,h.length-1),c.push(h)):c.push(v)}}}if(i){var U=Array.prototype.slice.call(i);c=c.concat(U)}return l=l.apply(o.parent,c)}}]),e}()},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});t.Selector=function(){function e(){n(this,e)}return r(e,null,[{key:"fuzzyFind",value:function(e,t){if(e&&e.attributes)for(var n=0;n<e.attributes.length;n++){var r=e.attributes[n];if(r.nodeName.search(t)>-1)return e}return null}},{key:"directText",value:function(e,t){for(var n="",r=e.childNodes,i=0;i<=r.length-1;i++){var a=r[i];if(3===a.nodeType){if(t||""===t||0===t||t===!1)return void(a.nodeValue=t);n+=a.nodeValue}}return n.trim()}},{key:"parents",value:function(e){for(var t=[];e.parentNode&&"BODY"!==e.parentNode.tagName;)t.push(e.parentNode),e=e.parentNode;return t}}]),e}()},function(e,t){"use strict";function n(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});t.ObjectUtil=function(){function e(){r(this,e)}return i(e,null,[{key:"isArray",value:function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{key:"getType",value:function(t){var r="undefined"==typeof t?"undefined":n(t);return"object"===r&&e.isArray(t)?"array":r}},{key:"compare",value:function(t,n){var r=e.getType(t),i=e.getType(n),a=!0;if(r!==i)return!1;switch(r){case"object":for(var u in t){var o=t[u],l=n[u],c=e.compare(o,l);if(!c){a=!1;break}}break;case"array":if(t.length===n.length)for(var s=0;s<t.length;s++){var f=t[s],d=n[s],v=e.compare(f,d);if(!v){a=!1;break}}else a=!1;break;case"function":a=t.toString()===n.toString();break;default:a=t===n}return a}},{key:"deepClone",value:function(e){var t=Object.getPrototypeOf(e);return Object.assign(Object.create(t),e)}}]),e}()},function(e,t,n){"use strict";function r(e,t,n,r){for(var a=[i,u,o,l,c],s=0;s<a.length;s++){var f=a[s],d=f.apply(this,arguments);if(d)break}}function i(e,t,n,r){var i=e.tagName;if("INPUT"===i&&a(e)&&"value"===t){var u="change",o=e.getAttribute("type");return"text"===o&&(u="input"),e.addEventListener(u,function(i){var a=e.getAttribute("uku-"+t);a=s.UkuleleUtil.getFinalAttribute(a);for(var u=a.split("."),o=n.controllerInstance,l=0;l<u.length-1;l++)o=o[u[l]];o[u[u.length-1]]=e.value,r&&r(n.alias)}),!0}return!1}function a(e){var t=e.getAttribute("type");return"checkbox"!==t&&"radio"!==t?!0:!1}function u(e,t,n,r){var i=e.tagName;return"TEXTAREA"===i&&"value"===t?(e.addEventListener("input",function(i){var a=e.getAttribute("uku-"+t);a=s.UkuleleUtil.getFinalAttribute(a);for(var u=a.split("."),o=n.controllerInstance,l=0;l<u.length-1;l++)o=o[u[l]];o[u[u.length-1]]=e.value,r&&r(n.alias)}),!0):!1}function o(e,t,n,r){var i=e.tagName;return"SELECT"===i&&"selected"===t?(e.addEventListener("change",function(i){var a,u=e.getAttribute("uku-"+t),o=u.split("|");u=o[0],a=o[1],u=s.UkuleleUtil.getFinalAttribute(u);for(var l=u.split("."),c=n.controllerInstance,f=0;f<l.length-1;f++)c=c[l[f]];for(var d=e.querySelectorAll("option"),v=0;v<d.length;v++){var h=d[v];if(h.selected){var p=JSON.parse(h.getAttribute("data-item"));c[l[l.length-1]]=p}}r&&r(n.alias)}),!0):!1}function l(e,t,n,r){var i=e.tagName;return"INPUT"===i&&"value"===t&&"checkbox"===e.getAttribute("type")?(e.addEventListener("change",function(i){var a=e.getAttribute("uku-"+t);a=s.UkuleleUtil.getFinalAttribute(a);for(var u=a.split("."),o=n.controllerInstance,l=0;l<u.length-1;l++)o=o[u[l]];o[u[u.length-1]]=e.checked,r&&r(n.alias)}),!0):!1}function c(e,t,n,r){var i=e.tagName;return"INPUT"===i&&"selected"===t&&"radio"===e.getAttribute("type")?(e.addEventListener("change",function(i){var a=e.getAttribute("uku-"+t);a=s.UkuleleUtil.getFinalAttribute(a);for(var u=a.split("."),o=n.controllerInstance,l=0;l<u.length-1;l++)o=o[u[l]];e.checked&&(o[u[u.length-1]]=e.value,r&&r(n.alias))}),!0):!1}Object.defineProperty(t,"__esModule",{value:!0}),t.elementChangedBinder=void 0;var s=n(1);t.elementChangedBinder=r},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});t.ControllerModel=function(){function e(t,r){n(this,e),this.alias=t,this.controllerInstance=r,this.boundItems=[]}return r(e,[{key:"addBoundItem",value:function(e){this.boundItems.push(e)}},{key:"getBoundItemsByName",value:function(e){for(var t=[],n=0;n<this.boundItems.length;n++){var r=this.boundItems[n];r.attributeName===e&&t.push(r)}return t}}]),e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.BoundItemAttribute=void 0;var o=n(7),l=n(1);t.BoundItemAttribute=function(e){function t(e,n,a,u){r(this,t);var o=i(this,Object.getPrototypeOf(t).call(this,e,a,u));return o.ukuTag=n,o}return a(t,e),u(t,[{key:"render",value:function(e){var t=this.attributeName,n=void 0,r=this.element.tagName;if("selected"===this.ukuTag&&"SELECT"===r){var i=this.attributeName.split("|");t=i[0],n=i[1]}var a=l.UkuleleUtil.getFinalValue(this.uku,e,t);if(-1!==this.ukuTag.search("data-item"))a=JSON.stringify(a),this.element.setAttribute("data-item",a);else if("selected"===this.ukuTag&&"SELECT"===r){var u=void 0;u=n?a[n]:a,this.element.value=u}else"checkbox"===this.element.getAttribute("type")?this.element.checked=a:"value"===this.ukuTag?this.element.value=a:"radio"===this.element.getAttribute("type")?this.element.value===a&&this.element.setAttribute("checked",!0):"IMG"===this.element.nodeName&&"src"===this.ukuTag?a&&this.element.setAttribute(this.ukuTag,a):"disabled"===this.ukuTag?this.element.disabled=a:this.element.setAttribute(this.ukuTag,a)}}]),t}(o.BoundItemBase)},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});t.BoundItemBase=function r(e,t,i){n(this,r),this.attributeName=e,this.element=t,this.uku=i}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.BoundItemExpression=void 0;var o=n(7),l=n(1),c=n(2);t.BoundItemExpression=function(e){function t(e,n,a,u){r(this,t);var o=i(this,Object.getPrototypeOf(t).call(this,e,a,u));return o.expression=n,o}return a(t,e),u(t,[{key:"render",value:function(e){var t=l.UkuleleUtil.getFinalValue(this.uku,e,this.attributeName);c.Selector.directText(this.element,t)}}]),t}(o.BoundItemBase)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.BoundItemInnerText=void 0;var o=n(7),l=n(1);t.BoundItemInnerText=function(e){function t(e,n,a){r(this,t);var u=i(this,Object.getPrototypeOf(t).call(this,e,n,a));return u.tagName="text",u}return a(t,e),u(t,[{key:"render",value:function(e){var t=l.UkuleleUtil.getFinalValue(this.uku,e,this.attributeName);this.element.innerHTML=t}}]),t}(o.BoundItemBase)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t.BoundItemRepeat=void 0;var o=n(7),l=n(1);t.BoundItemRepeat=function(e){function t(e,n,a){r(this,t);var u=i(this,Object.getPrototypeOf(t).call(this,e,n,a));return u.expression=itemName,u.renderTemplate=n.outerHTML,u.parentElement=n.parentNode,u.beginCommentString=void 0,u.endCommentString=void 0,u}return a(t,e),u(t,[{key:"render",value:function(e){function t(e){return e.nodeValue===i.beginCommentString?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}function n(){var e=l.UkuleleUtil.searchHtmlTag(i.renderTemplate,"tr");return-1===e?document.createElement("div"):document.createElement("tbody")}var r=l.UkuleleUtil.getFinalValue(this.uku,e,this.attributeName);if(r){var i=this;if(this.element&&this.element.parentNode){this.beginCommentString="begin uku-repeat: "+this.expression+" in "+this.attributeName;var a=document.createComment(this.beginCommentString);this.element.parentNode.insertBefore(a,this.element),this.endCommentString="end uku-repeat: "+this.expression+" in "+this.attributeName;var u=document.createComment(this.endCommentString);this.element.parentNode.insertBefore(u,this.element.nextSibling),this.element.parentNode.removeChild(this.element)}for(var o=document.createTreeWalker(this.parentElement,NodeFilter.SHOW_COMMENT,t,!1);o.nextNode();){var c=o.currentNode;if(c&&c.nodeValue===this.beginCommentString){for(;c.nextSibling&&c.nextSibling.nodeValue!==this.endCommentString;)c.parentNode.removeChild(c.nextSibling);var s=n(),f=n();c.parentNode.insertBefore(f,c.nextSibling);for(var d=0;d<r.length;d++)if(s.insertAdjacentHTML("beforeEnd",this.renderTemplate),d===r.length-1){var v=s.innerHTML;f.insertAdjacentHTML("beforeBegin",v),c.parentNode.removeChild(f),s=null,f=null}for(var h=c.nextSibling,p=0;p<r.length;p++){h.removeAttribute("uku-repeat");var g=new Ukulele;g.parentUku=this.uku,g.registerController(this.expression,r[p]),g.dealWithElement(h),h=h.nextSibling}}}if("OPTION"===this.element.tagName){var b=this.parentElement.getAttribute("uku-selected"),m=b.split("|");b=m[0],key=m[1];var y=this.uku.getFinalValueByExpression(b);key?this.parentElement.value=y[key]:this.parentElement.value=y}}}}]),t}(o.BoundItemBase)}])});